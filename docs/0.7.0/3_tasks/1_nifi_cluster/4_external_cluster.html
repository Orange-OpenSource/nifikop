<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="alternate" type="application/rss+xml" href="/nifikop/blog/rss.xml" title="NiFiKop Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/nifikop/blog/atom.xml" title="NiFiKop Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="NiFiKop" href="/nifikop/opensearch.xml">
<script src="https://cdn.jsdelivr.net/npm/focus-visible@5.2.0/dist/focus-visible.min.js" defer="defer"></script>
<script src="https://snack.expo.io/embed.js" defer="defer"></script><title data-react-helmet="true">External cluster Â· NiFiKop</title><meta data-react-helmet="true" property="og:image" content="https://orange-opensource.github.io/nifikop/img/logo-og.png"><meta data-react-helmet="true" property="twitter:image" content="https://orange-opensource.github.io/nifikop/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for NiFiKop"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="0.7.0"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-0.7.0"><meta data-react-helmet="true" property="og:title" content="External cluster Â· NiFiKop"><meta data-react-helmet="true" name="description" content="This task shows you how to configure an external cluster."><meta data-react-helmet="true" property="og:description" content="This task shows you how to configure an external cluster."><meta data-react-helmet="true" property="og:url" content="https://orange-opensource.github.io/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/4_external_cluster"><link data-react-helmet="true" rel="shortcut icon" href="/nifikop/img/nifikop.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://orange-opensource.github.io/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/4_external_cluster"><link rel="stylesheet" href="/nifikop/styles.44811dfe.css">
<link rel="stylesheet" href="/nifikop/main.795dfe97.css">
<link rel="preload" href="/nifikop/styles.d6e002e6.js" as="script">
<link rel="preload" href="/nifikop/runtime~main.02125b8b.js" as="script">
<link rel="preload" href="/nifikop/main.4299ba04.js" as="script">
<link rel="preload" href="/nifikop/1.2d6441df.js" as="script">
<link rel="preload" href="/nifikop/2.6f121237.js" as="script">
<link rel="preload" href="/nifikop/3.4f17f225.js" as="script">
<link rel="preload" href="/nifikop/1be78505.1c820f69.js" as="script">
<link rel="preload" href="/nifikop/358.980d14e9.js" as="script">
<link rel="preload" href="/nifikop/2fe15297.e2baf00d.js" as="script">
<link rel="preload" href="/nifikop/17896441.31e05773.js" as="script">
<link rel="preload" href="/nifikop/48bb6b8a.813628fe.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/nifikop/"><img class="navbar__logo" src="/nifikop/img/nifikop.png" alt="NiFiKop Logo"><strong class="navbar__title">NiFiKop</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/nifikop/docs/0.7.0/1_concepts/1_introduction">0.7.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/nifikop/docs/next/3_tasks/1_nifi_cluster/4_external_cluster">Next</a></li><li><a class="dropdown__link" href="/nifikop/docs/3_tasks/1_nifi_cluster/4_external_cluster">0.7.6</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.7.5/3_tasks/1_nifi_cluster/4_external_cluster">v0.7.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/4_external_cluster">0.7.0</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.6.3/1_concepts/1_introduction">v0.6.3</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.6.2/1_concepts/1_introduction">v0.6.2</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.6.1/1_concepts/1_introduction">v0.6.1</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.6.0/1_concepts/1_introduction">v0.6.0</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.5.3/1_concepts/1_introduction">v0.5.3</a></li><li><a class="dropdown__link" href="/nifikop/docs/v0.4.3/1_concepts/1_introduction">v0.4.3</a></li><li><a class="dropdown__link" href="/nifikop/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link header-doc-link" aria-label="Documentation" href="/nifikop/docs/1_concepts/1_introduction"></a><a class="navbar__item navbar__link header-blog-link" aria-label="Blog" href="/nifikop/blog"></a><a href="https://github.com/Orange-OpenSource/nifikop" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_3lWe"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_gnXW">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_gnXW">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/nifikop/"><img class="navbar__logo" src="/nifikop/img/nifikop.png" alt="NiFiKop Logo"><strong class="navbar__title">NiFiKop</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link header-doc-link" aria-label="Documentation" href="/nifikop/docs/1_concepts/1_introduction"></a></li><li class="menu__list-item"><a class="menu__link header-blog-link" aria-label="Blog" href="/nifikop/blog"></a></li><li class="menu__list-item"><a href="https://github.com/Orange-OpenSource/nifikop" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/next/3_tasks/1_nifi_cluster/4_external_cluster">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/3_tasks/1_nifi_cluster/4_external_cluster">0.7.6</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.7.5/3_tasks/1_nifi_cluster/4_external_cluster">v0.7.5</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/4_external_cluster">0.7.0</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.6.3/1_concepts/1_introduction">v0.6.3</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.6.2/1_concepts/1_introduction">v0.6.2</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.6.1/1_concepts/1_introduction">v0.6.1</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.6.0/1_concepts/1_introduction">v0.6.0</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.5.3/1_concepts/1_introduction">v0.5.3</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/docs/v0.4.3/1_concepts/1_introduction">v0.4.3</a></li><li class="menu__list-item"><a class="menu__link" href="/nifikop/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2UBv"><div class="docSidebarContainer_1hqR" role="complementary"><div class="sidebar_MSwm"><div class="menu menu--responsive menu_2hiu"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_37TU" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/1_concepts/1_introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/1_concepts/2_design_principes">Design Principes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/1_concepts/3_features">Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/1_concepts/4_roadmap">Roadmap</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/2_setup/1_getting_started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Platform Setup</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/2_setup/2_platform_setup/1_gke">Google Kubernetes Engine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/2_setup/2_platform_setup/2_minikube">MiniKube</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Install</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/2_setup/3_install/1_customizable_install_with_helm">Customizable install with Helm</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Tasks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">NiFi Cluster</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/2_cluster_scaling">Cluster Scaling</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/4_external_cluster">External cluster</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/3_tasks/2_security/1_ssl">SSL</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/3_tasks/2_security/2_authentication/1_oidc">OpenId Connect</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/nifikop/docs/0.7.0/3_tasks/3_nifi_dataflow">NiFi Dataflows</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/nifikop/docs/0.7.0/3_tasks/4_nifi_user_group">NiFi Users and Groups</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">NiFi Cluster</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/1_nifi_cluster">NiFi cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/2_read_only_config">Read only configurations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/3_node_config">Node configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/4_node">Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/5_node_state">Node state</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/6_listeners_config">Listeners Config</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/1_nifi_cluster/7_external_service_config">External Service Config</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/2_nifi_user">NiFi User</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/3_nifi_registry_client">NiFi Registry Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/4_nifi_parameter_context">NiFi Parameter Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/5_nifi_dataflow">NiFi Dataflow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/5_references/6_nifi_usergroup">NiFi UserGroup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contributing</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/6_contributing/1_developer_guide">Developer guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/6_contributing/2_reporting_bugs">Reporting bugs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/nifikop/docs/0.7.0/6_contributing/3_credits">Credits</a></li></ul></li></ul></div></div></div><main class="docMainContainer_1rYT"><div class="container padding-vert--lg docItemWrapper_3NEy"><div class="row"><div class="col docItemCol_xWqS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for NiFiKop <strong>0.7.0</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/nifikop/docs/3_tasks/1_nifi_cluster/4_external_cluster">latest version</a></strong> (0.7.6).</div></div><div class="docItemContainer_2ApQ"><article><div><span class="badge badge--secondary">Version: 0.7.0</span></div><header><h1 class="docTitle_N1jF">External cluster</h1></header><div class="markdown"><p>This task shows you how to configure an external cluster.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="common-configuration"></a>Common configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#common-configuration" title="Direct link to heading">#</a></h2><p>The operator allows you to manage the Dataflow lifecycle for internal (i.e cluster managed by the operator) and external NiFi cluster.
A NiFi cluster is considered as external as soon as the <code>NifiCluster</code> resource used as reference in other NiFi resource explicitly detailed the way to comunicate with the cluster.</p><p>This feature allows you :</p><ul><li>To automate your Dataflow CI/CD using yaml</li><li>To manage the same way your Dataflow management wherever your cluster is, on bare metal, VMs, k8s, on-premise or on cloud.</li></ul><p>To deploy different resources (<code>NifiRegistryClient</code>, <code>NifiUser</code>, <code>NifiUserGroup</code>, <code>NifiParameterContext</code>, <code>NifiDataflow</code>) you simply have to declare a <code>NifiCluster</code> resource explaining how to discuss with the external cluster, and refer to this resource as usual using the <code>Spec.ClusterRef</code> field.</p><p>To declare an external cluster you have to follow this kind of configuration :</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-yaml codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token key atrule" style="color:#859900">apiVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> nifi.orange.com/v1alpha1</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token key atrule" style="color:#859900">kind</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> NifiCluster</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token key atrule" style="color:#859900">metadata</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">name</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> externalcluster</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token key atrule" style="color:#859900">spec</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># rootProcessGroupId contains the uuid of the root process group for this cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">rootProcessGroupId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;d37bee03-017a-1000-cff7-4eaaa82266b7&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># nodeURITemplate used to dynamically compute node uri.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">nodeURITemplate</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;nifi0%d.integ.mapreduce.m0.p.fti.net:9090&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># all node requiresunique id</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">nodes</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#859900">id</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#859900">id</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">2</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#859900">id</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># type defines if the cluster is internal (i.e manager by the operator) or external.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># :Enum={&quot;external&quot;,&quot;internal&quot;}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">type</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;external&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># clientType defines if the operator will use basic or tls authentication to query the NiFi cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># Enum={&quot;tls&quot;,&quot;basic&quot;}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">clientType</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;basic&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token comment" style="color:#93a1a1"># secretRef reference the secret containing the informations required to authenticate to the cluster.</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token key atrule" style="color:#859900">secretRef</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token key atrule" style="color:#859900">name</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> nifikop</span><span class="token punctuation" style="color:#657b83">-</span><span class="token plain">credentials</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token key atrule" style="color:#859900">namespace</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> nifikop</span><span class="token punctuation" style="color:#657b83">-</span><span class="token plain">nifi</span></div></div></div></div></div><ul><li>The <code>Spec.RootProcessGroupId</code> field is required to give the ability to the operator of managing root level policy and default deployment and policy.</li><li>The <code>Spec.NodeURITemplate</code> field, defines the hostname template of your NiFi cluster nodes, the operator will use this information and the list of id specified in <code>Spec.Nodes</code> field to generate the hostname of the nodes (in the configuration above you will have : <code>nifi01.integ.mapreduce.m0.p.fti.net:9090</code>, <code>nifi02.integ.mapreduce.m0.p.fti.net:9090</code>, <code>nifi03.integ.mapreduce.m0.p.fti.net:9090</code>).</li><li>The <code>Spec.Type</code> field defines the type of cluster that this resource is refering to, by default it is <code>internal</code>, in our case here we just want to use this resource to reference an existing NiFi cluster, so we set this field to <code>external</code>.</li><li>The <code>Spec.ClientType</code> field defines how we want to authenticate to the NiFi cluster API, for now we are supporting two modes :<ul><li><code>tls</code> : using client TLS certificate.</li><li><code>basic</code> : using a username and a password to get an access token.</li></ul></li><li>The <code>Spec.SecretRef</code> defines a reference to a secret which contains the sensitive values that will be used by the operator to authenticate to the NiFi cluster API (ie in basic mode it will contain the password and username).</li></ul><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>The id of node only support <code>int32</code> as type, so if the hostname of your nodes doesn&#x27;t match with this, you can&#x27;t use this feature.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="secret-configuration-for-basic-authentication"></a>Secret configuration for Basic authentication<a aria-hidden="true" tabindex="-1" class="hash-link" href="#secret-configuration-for-basic-authentication" title="Direct link to heading">#</a></h2><p>When you are using the basic authentication, you have to pass some informations into the secret that is referenced into the <code>NifiCluster</code> resource:</p><ul><li><code>username</code> : the username associated to the user that will be used by the operator to request the REST API.</li><li><code>password</code> : the password associated to the user that will be used by the operator to request the REST API.</li><li><code>ca.crt (optional)</code>: the certificate authority to trust the server certificate if needed</li></ul><p>The following command shows how you can create this secret :</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-console codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">kubectl create secret generic nifikop-credentials \</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  --from-file=username=./secrets/username\</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  --from-file=password=./secrets/password\</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  --from-file=ca.crt=./secrets/ca.crt\</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  -n nifikop-nifi</span></div></div></div></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>When you use the basic authentication, the operator will create a secret <code>&lt;cluster name&gt;-basic-secret</code> containing for each node an access token that will be maintained by the operator.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="secret-configuration-for-tls-authentication"></a>Secret configuration for TLS authentication<a aria-hidden="true" tabindex="-1" class="hash-link" href="#secret-configuration-for-tls-authentication" title="Direct link to heading">#</a></h2><p>When you are using the tls authentication, you have to pass some information into the secret that is referenced into the <code>NifiCluster</code> resource:</p><ul><li><code>tls.key</code> : The user private key.</li><li><code>tls.crt</code> : The user certificate.</li><li><code>password</code> : the password associated to the user that will be used by the operator to request the REST API.</li><li><code>ca.crt</code>: The CA certificate</li><li><code>truststore.jks</code>:</li><li><code>keystore.jks</code>:</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Orange-OpenSource/nifikop/edit/master/site/website/versioned_docs/version-0.7.0/3_tasks/1_nifi_cluster/4_external_cluster.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-10-13T06:41:18.000Z" class="docLastUpdatedAt_3LuF">10/13/2021</time> by <strong>Alexandre Guitton</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/nifikop/docs/0.7.0/3_tasks/1_nifi_cluster/2_cluster_scaling"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Cluster Scaling</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/nifikop/docs/0.7.0/3_tasks/2_security/1_ssl"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Securing NiFi with SSL Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3iuQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#common-configuration" class="table-of-contents__link">Common configuration</a></li><li><a href="#secret-configuration-for-basic-authentication" class="table-of-contents__link">Secret configuration for Basic authentication</a></li><li><a href="#secret-configuration-for-tls-authentication" class="table-of-contents__link">Secret configuration for TLS authentication</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Getting Started</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/nifikop/docs/1_concepts/1_introduction">Documentation</a></li><li class="footer__item"><a href="https://github.com/Orange-OpenSource/nifikop" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://nifikop.slack.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a class="footer__link-item" href="/nifikop/blog">Blog</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Contact</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Orange-OpenSource/nifikop/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item">Feature request</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2022 Orange, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/nifikop/styles.d6e002e6.js"></script>
<script src="/nifikop/runtime~main.02125b8b.js"></script>
<script src="/nifikop/main.4299ba04.js"></script>
<script src="/nifikop/1.2d6441df.js"></script>
<script src="/nifikop/2.6f121237.js"></script>
<script src="/nifikop/3.4f17f225.js"></script>
<script src="/nifikop/1be78505.1c820f69.js"></script>
<script src="/nifikop/358.980d14e9.js"></script>
<script src="/nifikop/2fe15297.e2baf00d.js"></script>
<script src="/nifikop/17896441.31e05773.js"></script>
<script src="/nifikop/48bb6b8a.813628fe.js"></script>
</body>
</html>